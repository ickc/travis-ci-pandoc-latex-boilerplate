matrix:
    include:
        - os: linux
          sudo: false
          before_install:
              - pip install --user pandocfilters
          install:
              - tlmgr install latexmk
              - tlmgr install physics
              - tlmgr install cancel
        - os: linux
          sudo: required
          dist: trusty
          before_install:
              - pip install -U pip
              - pip install -U pandocfilters
          install:
              - tlmgr install latexmk
              - tlmgr install physics
              - tlmgr install cancel
        - os: osx
          osx_image: xcode8
          before_install:
              - pip install -U pip
              - pip install -U pandocfilters
          install:
              - sudo tlmgr install latexmk
              - sudo tlmgr install physics
              - sudo tlmgr install cancel
              - sudo tlmgr install siunitx
              - sudo tlmgr install placeins
language: r
pandoc_version: 1.18
cache: [packages, pip]
script:
    - make -j4 travis
deploy:
  provider: releases
  api_key: "$GH_TOKEN"
  file:
    - "workbook-7A.pdf"
    - "workbook-8A.pdf"
    - "workbook-Master.pdf"
    - "workbook-7A.epub"
    - "workbook-8A.epub"
    - "workbook-Master.epub"
  skip_cleanup: true
  on:
    tags: true
